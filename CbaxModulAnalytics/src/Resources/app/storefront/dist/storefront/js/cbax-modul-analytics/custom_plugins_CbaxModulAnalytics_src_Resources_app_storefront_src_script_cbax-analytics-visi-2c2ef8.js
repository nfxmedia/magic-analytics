"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom_plugins_CbaxModulAnalytics_src_Resources_app_storefront_src_script_cbax-analytics-visi-2c2ef8"],{566:(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});class r{static isSupported(){return"undefined"!==document.cookie}static setItem(t,e,s){if(null==t)throw Error("You must specify a key to set a cookie");let r=new Date;r.setTime(r.getTime()+864e5*s);let o="";"https:"===location.protocol&&(o="secure"),document.cookie="".concat(t,"=").concat(e,";expires=").concat(r.toUTCString(),";path=/;sameSite=lax;").concat(o)}static getItem(t){if(!t)return!1;let e=t+"=",s=document.cookie.split(";");for(let t=0;t<s.length;t++){let r=s[t];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return!1}static removeItem(t){document.cookie="".concat(t,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/")}static key(){return""}static clear(){}}class o{setItem(t,e){return this._storage[t]=e}getItem(t){return Object.prototype.hasOwnProperty.call(this._storage,t)?this._storage[t]:null}removeItem(t){return delete this._storage[t]}key(t){return Object.values(this._storage)[t]||null}clear(){return this._storage={}}constructor(){this._storage={}}}class i{_chooseStorage(){return i._isSupported(window.localStorage)?this._storage=window.localStorage:i._isSupported(window.sessionStorage)?this._storage=window.sessionStorage:r.isSupported()?this._storage=r:this._storage=new o}static _isSupported(t){try{let e="__storage_test";return t.setItem(e,"1"),t.removeItem(e),!0}catch(t){return!1}}_validateStorage(){if("function"!=typeof this._storage.setItem)throw Error('The storage must have a "setItem" function');if("function"!=typeof this._storage.getItem)throw Error('The storage must have a "getItem" function');if("function"!=typeof this._storage.removeItem)throw Error('The storage must have a "removeItem" function');if("function"!=typeof this._storage.key)throw Error('The storage must have a "key" function');if("function"!=typeof this._storage.clear)throw Error('The storage must have a "clear" function')}getStorage(){return this._storage}constructor(){this._storage=null,this._chooseStorage(),this._validateStorage()}}let a=Object.freeze(new i).getStorage();class n extends window.PluginBaseClass{init(){this._request=new XMLHttpRequest,this.updateData()}updateData(){var t;let e=navigator.userAgent;if(e&&/bot|googlebot|robot|baidu|crawl|crawler|bingbot|yahoo|yandexbot|msnbot|slurp|spider|mediapartners/i.test(e))return;let s=this.el.getAttribute(this.options.action);if(!s)return;let r=this.el.getAttribute(this.options.referer),o=new Date,i=a.getItem(this.options.visitorStorageKey),n=parseInt((t=this.el.getAttribute(this.options.visitorTime))!==null&&void 0!==t?t:12,10);try{i?i&&(o-new Date(i))/36e5>n&&(s=s.substring(0,s.length-1)+"1",a.setItem(this.options.visitorStorageKey,o.toISOString())):(s=s.substring(0,s.length-1)+"1",a.setItem(this.options.visitorStorageKey,o.toISOString()))}catch(t){return}this._request.open("GET",s),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._request.setRequestHeader("Content-type","application/json"),r&&this._request.setRequestHeader("cbax-referer",r),this._request.send()}}n.options={action:"data-cbax-analytics-visitors",visitorStorageKey:"cbax-sw-visit",visitorTime:"data-cbax-analytics-visitor-time",referer:"data-cbax-analytics-referer"}}}]);